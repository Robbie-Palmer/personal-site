[tasks.format]
description = "Format Terraform files (optionally pass files as args)"
run = """
#!/usr/bin/env bash
if [ $# -eq 0 ]; then
  terraform fmt -recursive .
else
  terraform fmt "$@"
fi
"""

[tasks."format:check"]
description = "Check Terraform formatting without making changes"
run = """
#!/usr/bin/env bash
if [ $# -eq 0 ]; then
  terraform fmt -check -recursive .
else
  terraform fmt -check "$@"
fi
"""

[tasks.lint]
description = "Validate all Terraform configurations"
depends = ["//infra/cloudflare:lint"]

[tasks.precommit-lint]
description = "Validate all Terraform configurations (lightweight for pre-commit)"
depends = ["//infra/cloudflare:precommit-lint"]
