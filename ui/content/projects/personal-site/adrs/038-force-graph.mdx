---
title: "ADR 038: Force-Directed Graph Visualization"
date: "2026-02-07"
status: "Proposed"
tech_stack: ["react-force-graph"]
---

# Context

The site's content is structured as a knowledge graph with ~150 nodes (projects, blog posts, ADRs, technologies, roles, tags) and hundreds of edges representing relationships like `USES_TECHNOLOGY`, `PART_OF_PROJECT`, `CREATED_AT_ROLE`, and `HAS_TAG`. This graph already powers backlinks, connected filters, and content discovery throughout the site.

However, there is currently no way to visually see the graph itself. A visualization would:

- Reveal the structure and interconnectedness of the content at a glance
- Enable exploration by clicking through nodes to discover related content
- Showcase the depth of the knowledge graph to visitors
- Help identify clusters, central nodes, and isolated content during authoring

The main libraries for interactive graph visualization in the browser are:

- **D3.js** (`d3-force`): The foundational force simulation library. Maximum flexibility but low-level — requires manual rendering, zoom/pan, and React integration. Fights React's declarative model over DOM ownership.
- **react-force-graph**: React wrapper around `force-graph` (which uses `d3-force` internally). Provides 2D (Canvas) and 3D (WebGL/Three.js) variants with zoom, pan, drag, hover, and click built in. Minimal code to get a working graph.
- **Sigma.js** (`@react-sigma/core`): WebGL-based, purpose-built for very large graphs (10K+ nodes). Overkill for ~150 nodes.
- **Cytoscape.js** (`react-cytoscapejs`): Mature graph library with many layout algorithms (hierarchical, circular, force). More complex API, better suited for analytical/research use cases.

# Decision

Use **[react-force-graph](https://github.com/vasturiano/react-force-graph)** (`react-force-graph-2d`) for an interactive knowledge graph visualization.

This extracts the site's real `ContentGraph` data at build time, serializes it as `{nodes, links}`, and renders it client-side using a Canvas-based force-directed layout. The implementation:

- **Color-codes nodes by type**: projects (blue), blogs (orange), roles (purple), ADRs (grey), technologies (green), tags (yellow)
- **Sizes nodes by connection count**: more-connected nodes appear larger
- **Supports filtering**: toggle node types on/off to reduce visual density
- **Links to content**: clicking a node opens its page
- **Shows labels on zoom**: node names appear when zoomed in, avoiding clutter at overview level
- **Loads lazily**: uses `next/dynamic` with `ssr: false` since the Canvas API requires the browser

## Demo

<ForceGraphDemo />

# Consequences

### Pros

- **Uses real data**: Renders the actual knowledge graph, not a demo dataset. Any new content automatically appears in the visualization.
- **Minimal code**: react-force-graph handles force simulation, Canvas rendering, zoom/pan/drag, and interaction events. The entire implementation is ~200 lines of component code plus ~100 lines of data extraction.
- **d3-force under the hood**: Gets the proven physics simulation from d3-force without needing to manage it directly. The force layout naturally clusters related content.
- **Canvas rendering**: Performant for ~150 nodes compared to SVG-based approaches that create individual DOM elements per node.
- **SSG-compatible**: Data extraction happens at build time in a server component. Only the Canvas renderer runs client-side.
- **Filterable**: Node type toggles let users focus on specific content types (e.g., just projects and technologies, hiding ADRs).

### Cons

- **No SSR**: The Canvas-based renderer requires the browser. The graph shows a loading placeholder during hydration.
- **Bundle size**: react-force-graph + force-graph + d3-force add client-side JavaScript. Mitigated by lazy loading so it only loads on pages that use it.
- **Information density**: With all node types visible, the graph can feel busy. Filtering helps, but the default view may benefit from further tuning (e.g., hiding tags by default, or only showing technologies with 2+ connections).
- **Accessibility**: Canvas-based rendering is not accessible to screen readers. The graph is a supplementary visualization — all content remains navigable via standard pages.
- **Mobile experience**: Force-directed graphs work best with mouse interaction. Touch zoom/pan works but is less intuitive on small screens.
